/**================================================================================================
@program: ePagingOnce.js
@description: 
@version: 1.0.20170313
=================================================================================================*/
eSoafApp.directive("ePagingOnce",["projInfoService",function(t){return{restrict:"E",replace:!0,scope:{output:"=",list:"=?",mode:"=?",page:"@?",rowCountLimit:"=?rowcountlimit"},template:function(t,e){var a='<div class="pagingRow">    <ul class="pagination" ng-if="mode == 1 && dataList.length > 0">       <li><a href="page/1" onclick="return false" ng-click="changePage(0)">&laquo;</a></li>       <li><a href="/page/{{outputVO.currentPageIndex == 0 ? 1 : outputVO.currentPageIndex}}" onclick="return false" ng-click="changePage(outputVO.currentPageIndex == 0 ? 0 : outputVO.currentPageIndex - 1)">&lsaquo;</a></li>       <li ng-repeat="row in resultArray" class="{{row.clazz}}"><a href="/page/{{row.text + 1}}" onclick="return false" ng-click="changePage(row.text)">{{row.text + 1}}</a></li>       <li><a href="/page/{{outputVO.currentPageIndex == outputVO.totalPage - 1 ? outputVO.totalPage : outputVO.currentPageIndex + 2}}" onclick="return false" ng-click="changePage(outputVO.currentPageIndex == outputVO.totalPage - 1 ? outputVO.totalPage - 1 : outputVO.currentPageIndex + 1)">&rsaquo;</a></li>		<li><a href="page/{{outputVO.totalPage}}" onclick="return false" ng-click="changePage(outputVO.totalPage - 1)">&raquo;</a></li>		<span style="padding-left:20px;position: relative;top: 10px;" ng-if="mode == 1 && outputVO.totalRecord > 0">		{{1 + (rowCountLimit * outputVO.currentPageIndex)}} - {{dataList.length + (rowCountLimit * outputVO.currentPageIndex)}}&nbsp;&nbsp;&nbsp;&nbsp;共{{outputVO.totalRecord}}筆		</span>    </ul></div>';return a},link:function(e,a,o,u){e.totalList=[],e.rowCountLimit=t.$paging.rowCountLimit,e.mode=e.mode||1,t.$paging.mode=e.mode,console.log("ePaging.mode="+t.$paging.mode),e.changePage=function(t){e.outputVO.currentPageIndex=t,$.extend(e.dataList,e.totalList),e.dataList.splice(0,t*e.rowCountLimit)},e.$watch("outputVO",function(t,a){e.dataList&&e.outputVO&&($.extend(e.totalList,e.dataList),e.outputVO.totalPage=Math.ceil(e.dataList.length/10),e.outputVO.totalRecord=e.dataList.length)}),e.$watch("outputVO.currentPageIndex",function(t,a){if(t!=a){e.page=e.page-0||4;var o=0;e.resultArray=[];var u=e.outputVO.currentPageIndex,r=e.outputVO.totalPage;if(2*e.page+1>r)for(var n=0;r>n;n++){var i={};i.clazz="",u==n&&(i.clazz="active"),i.text=n,e.resultArray.push(i)}else{for(var n=-e.page;n<=e.page;n++){var i={};i.clazz="",0==n&&(i.clazz="active"),0>u+n?o++:u+n>r-1?o--:(i.text=u+n,e.resultArray.push(i))}for(var n=1;n<=Math.abs(o);n++){var i={};i.clazz="",o>0?(i.text=u+e.page+n,e.resultArray.push(i)):(i.text=u-e.page-n,e.resultArray.splice(0,0,i))}}}})}}}]);