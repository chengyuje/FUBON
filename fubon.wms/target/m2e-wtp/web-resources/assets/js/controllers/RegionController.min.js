"use strict";eSoafApp.controller("RegionController",["$rootScope","$scope","$controller","$confirm","$filter","socketService","ngDialog","projInfoService","$q","getParameter",function(A,_,R,n,r,e,o,E,N,C){_.controllerName="RegionController",_.RegionController_setName=function(A){var R=N.defer();return _.DoRegionController(A).then(function(A){R.resolve()}),R.promise},_.DoRegionController=function(A){var R=N.defer();return _.AVAIL_REGION=E.getAvailRegion(),1==_.AVAIL_REGION.length?A[1][A[2]]=_.AVAIL_REGION[0].REGION_CENTER_ID:A[1][A[2]]=A[1][A[2]]?A[1][A[2]]:"null"==E.getRegionID()?"":E.getRegionID(),_[A[3]]=[],angular.forEach(_.AVAIL_REGION,function(R){_[A[3]].push({LABEL:R.REGION_CENTER_NAME,DATA:R.REGION_CENTER_ID})}),_.AVAIL_AREA=E.getAvailArea(),1==_.AVAIL_AREA.length?A[1][A[4]]=_.AVAIL_AREA[0].BRANCH_AREA_ID:A[1][A[4]]=A[1][A[4]]?A[1][A[4]]:"null"==E.getAreaID()?"":E.getAreaID(),_[A[5]]=[],angular.forEach(_.AVAIL_AREA,function(R){A[1][A[2]]?R.REGION_CENTER_ID==A[1][A[2]]&&_[A[5]].push({LABEL:R.BRANCH_AREA_NAME,DATA:R.BRANCH_AREA_ID}):_[A[5]].push({LABEL:R.BRANCH_AREA_NAME,DATA:R.BRANCH_AREA_ID})}),_.AVAIL_BRANCH=E.getAvailBranch(),1==_.AVAIL_BRANCH.length?A[1][A[6]]=_.AVAIL_BRANCH[0].BRANCH_NBR:A[1][A[6]]=A[1][A[6]]?A[1][A[6]]:"000"==E.getBranchID()?"":E.getBranchID(),_[A[7]]=[],angular.forEach(_.AVAIL_BRANCH,function(R){A[1][A[4]]?R.BRANCH_AREA_ID==A[1][A[4]]&&_[A[7]].push({LABEL:R.BRANCH_NAME,DATA:R.BRANCH_NBR}):_[A[7]].push({LABEL:R.BRANCH_NAME,DATA:R.BRANCH_NBR})}),_.AVAIL_AO_CODE=E.getAoCode(),A[1][A[8]]=A[1][A[8]]?A[1][A[8]]:E.getAoCode()[0]?E.getAoCode()[0]:"",_.RegionController_quireAo=function(A){var R=N.defer();return _.sendRecv("CRM381","ao_inquire","com.systex.jbranch.app.server.fps.crm381.CRM381InputVO",{region_center_id:A[1][A[2]],branch_area_id:A[1][A[4]],branch_nbr:A[1][A[6]]},function(n,r){_["TOTAL_"+A[9]]=n[0].body.ao_list,_[A[9]]=[],"Y"==A[0]&&_[A[9]].push({LABEL:"ç©ºCODE",DATA:"0"}),_.AVAIL_AO_CODE.length>0?_.AVAIL_AO_CODE.length>1?angular.forEach(_["TOTAL_"+A[9]],function(R){_.AVAIL_AO_CODE.indexOf(R.AO_CODE)>-1&&_[A[9]].push({LABEL:R.EMP_NAME,DATA:R.AO_CODE})}):_[A[9]].push({LABEL:E.getUserName(),DATA:_.AVAIL_AO_CODE[0]}):angular.forEach(_["TOTAL_"+A[9]],function(R){_[A[9]].push({LABEL:R.EMP_NAME,DATA:R.AO_CODE})}),R.resolve()}),R.promise},A[1][A[10]]=A[1][A[10]]?A[1][A[10]]:E.getUserID(),_.RegionController_quireEmp=function(A){var R=N.defer();return _.sendRecv("ORG220","getEmpList","com.systex.jbranch.app.server.fps.org220.ORG220InputVO",{region_center_id:A[1][A[2]],branch_area_id:A[1][A[4]],branch_nbr:A[1][A[6]]},function(n,r){_[A[11]]=n[0].body.empList,R.resolve()}),R.promise},N.all([_.RegionController_quireAo(A).then(function(A){}),_.RegionController_quireEmp(A).then(function(A){})]).then(function(){R.resolve()}),_.ChangeRegion=function(A){A[1][A[2]]?(_[A[5]]=[],angular.forEach(_.AVAIL_AREA,function(R){R.REGION_CENTER_ID==A[1][A[2]]&&_[A[5]].push({LABEL:R.BRANCH_AREA_NAME,DATA:R.BRANCH_AREA_ID})}),A[1][A[4]]||(_[A[7]]=[],angular.forEach(_.AVAIL_BRANCH,function(R){angular.forEach(_[A[5]],function(n){R.BRANCH_AREA_ID==n.DATA&&_[A[7]].push({LABEL:R.BRANCH_NAME,DATA:R.BRANCH_NBR})})})),_.RegionController_quireAo(A),_.RegionController_quireEmp(A),A[1][A[4]]&&A[1][A[2]]!=r("filter")(_.AVAIL_AREA,{BRANCH_AREA_ID:A[1][A[4]]})[0].REGION_CENTER_ID&&(A[1][A[4]]=""),A[1][A[6]]&&A[1][A[4]]!=r("filter")(_.AVAIL_BRANCH,{BRANCH_NBR:A[1][A[6]]})[0].BRANCH_AREA_ID&&(A[1][A[6]]=""),A[1][A[8]]&&"0"!=A[1][A[8]]&&A[1][A[6]]!=r("filter")(_["TOTAL_"+A[9]],{AO_CODE:A[1][A[8]]})[0].BRANCH_NBR&&(A[1][A[8]]=""),A[1][A[6]]!=r("filter")(_[A[11]],{DATA:A[1][A[10]]})[0].BRANCH_NBR&&(A[1][A[10]]="")):(A[1][A[4]]="",_[A[5]]=[],angular.forEach(_.AVAIL_AREA,function(R){_[A[5]].push({LABEL:R.BRANCH_AREA_NAME,DATA:R.BRANCH_AREA_ID})}),A[1][A[6]]="",_[A[7]]=[],angular.forEach(_.AVAIL_BRANCH,function(R){_[A[7]].push({LABEL:R.BRANCH_NAME,DATA:R.BRANCH_NBR})}),_.RegionController_quireAo(A),_.RegionController_quireEmp(A))},_.ChangeArea=function(A){A[1][A[4]]?(A[1][A[2]]=r("filter")(_.AVAIL_AREA,{BRANCH_AREA_ID:A[1][A[4]]})[0].REGION_CENTER_ID,_[A[7]]=[],angular.forEach(_.AVAIL_BRANCH,function(R){R.BRANCH_AREA_ID==A[1][A[4]]&&_[A[7]].push({LABEL:R.BRANCH_NAME,DATA:R.BRANCH_NBR})}),_.RegionController_quireAo(A),_.RegionController_quireEmp(A),A[1][A[6]]&&A[1][A[4]]!=r("filter")(_.AVAIL_BRANCH,{BRANCH_NBR:A[1][A[6]]})[0].BRANCH_AREA_ID&&(A[1][A[6]]=""),A[1][A[8]]&&"0"!=A[1][A[8]]&&A[1][A[6]]!=r("filter")(_["TOTAL_"+A[9]],{AO_CODE:A[1][A[8]]})[0].BRANCH_NBR&&(A[1][A[8]]=""),A[1][A[6]]!=r("filter")(_[A[11]],{DATA:A[1][A[10]]})[0].BRANCH_NBR&&(A[1][A[10]]="")):(A[1][A[6]]="",A[1][A[2]]?(_[A[5]]=[],angular.forEach(_.AVAIL_AREA,function(R){R.REGION_CENTER_ID==A[1][A[2]]&&_[A[5]].push({LABEL:R.BRANCH_AREA_NAME,DATA:R.BRANCH_AREA_ID})}),_[A[7]]=[],angular.forEach(_.AVAIL_BRANCH,function(R){angular.forEach(_[A[5]],function(n){R.BRANCH_AREA_ID==n.DATA&&_[A[7]].push({LABEL:R.BRANCH_NAME,DATA:R.BRANCH_NBR})})})):(_[A[7]]=[],angular.forEach(_.AVAIL_BRANCH,function(R){_[A[7]].push({LABEL:R.BRANCH_NAME,DATA:R.BRANCH_NBR})})),_.RegionController_quireAo(A),_.RegionController_quireEmp(A))},_.ChangeBranch=function(A){A[1][A[6]]?(A[1][A[4]]=r("filter")(_.AVAIL_BRANCH,{BRANCH_NBR:A[1][A[6]]})[0].BRANCH_AREA_ID,_.RegionController_quireAo(A),_.RegionController_quireEmp(A),A[1][A[8]]&&"0"!=A[1][A[8]]&&A[1][A[6]]!=r("filter")(_["TOTAL_"+A[9]],{AO_CODE:A[1][A[8]]})[0].BRANCH_NBR&&(A[1][A[8]]=""),A[1][A[6]]!=r("filter")(_[A[11]],{DATA:A[1][A[10]]})[0].BRANCH_NBR&&(A[1][A[10]]="")):(A[1][A[4]]?(_[A[7]]=[],angular.forEach(_.AVAIL_BRANCH,function(R){R.BRANCH_AREA_ID==A[1][A[4]]&&_[A[7]].push({LABEL:R.BRANCH_NAME,DATA:R.BRANCH_NBR})})):A[1][A[2]]?(_[A[5]]=[],angular.forEach(_.AVAIL_AREA,function(R){R.REGION_CENTER_ID==A[1][A[2]]&&_[A[5]].push({LABEL:R.BRANCH_AREA_NAME,DATA:R.BRANCH_AREA_ID})}),_[A[7]]=[],angular.forEach(_.AVAIL_BRANCH,function(R){angular.forEach(_[A[5]],function(n){R.BRANCH_AREA_ID==n.DATA&&_[A[7]].push({LABEL:R.BRANCH_NAME,DATA:R.BRANCH_NBR})})})):(A[1][A[4]]="",_[A[5]]=[],angular.forEach(_.AVAIL_AREA,function(R){_[A[5]].push({LABEL:R.BRANCH_AREA_NAME,DATA:R.BRANCH_AREA_ID})}),A[1][A[6]]="",_[A[7]]=[],angular.forEach(_.AVAIL_BRANCH,function(R){_[A[7]].push({LABEL:R.BRANCH_NAME,DATA:R.BRANCH_NBR})})),_.RegionController_quireAo(A),_.RegionController_quireEmp(A))},_.ChangeAo_code=function(A){A[1][A[8]]&&"0"!=A[1][A[8]]&&(A[1][A[2]]=r("filter")(_["TOTAL_"+A[9]],{AO_CODE:A[1][A[8]]})[0].REGION_CENTER_ID,A[1][A[4]]=r("filter")(_["TOTAL_"+A[9]],{AO_CODE:A[1][A[8]]})[0].BRANCH_AREA_ID,A[1][A[6]]=r("filter")(_["TOTAL_"+A[9]],{AO_CODE:A[1][A[8]]})[0].BRANCH_NBR,A[1][A[10]]=r("filter")(_["TOTAL_"+A[9]],{AO_CODE:A[1][A[8]]})[0].EMP_ID)},_.ChangeEmp_id=function(A){A[1][A[10]]&&(A[1][A[2]]=r("filter")(_[A[11]],{DATA:A[1][A[10]]})[0].REGION_CENTER_ID,A[1][A[4]]=r("filter")(_[A[11]],{DATA:A[1][A[10]]})[0].BRANCH_AREA_ID,A[1][A[6]]=r("filter")(_[A[11]],{DATA:A[1][A[10]]})[0].BRANCH_NBR,A[1][A[8]]=r("filter")(_[A[11]],{DATA:A[1][A[10]]})[0].AO_CODE)},R.promise}}]);