<script type="text/javascript" src="assets/txn/CRM241/CRM241.js"></script>
<script type="text/javascript" src="assets/txn/CRM210/CRM210.js"></script>
<script type="text/javascript" src="assets/txn/PMS109/PMS109.js"></script>
<script type="text/javascript" src="assets/txn/PMS109/PPAP.js"></script>
<div ng-controller="CRM241Controller" ng-cloak>
	<div>
		<div class="tfb_content">
			<div class="tfb_content_icon"></div>
			<div class="tfb_content_tit"><img src="assets/images/icon/tfb_icon_a15.gif" >查詢條件</div>
		</div>
		<!--Content of the panel-->
		<div class="panel_content">
			<div class="search_table search_box3">
				<table>
					<tr>
	     				<th ng-hide="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">業務處：</th>
	     				<td ng-hide="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">
	     					<e-combobox id="center_id" name="center_id"
										ng-datasource="REGION_LIST"
										ng-model="inputVO.center_id"
										ng-validate="false" 
										ng-disabled="AVAIL_REGION.length == 1"
										ng-readonly="AVAIL_REGION.length == 1" 
										ng-editable="false"
										ng-format="F3"
										ng-required="true"
										ng-change="ChangeRegion(region)"
										style="line-height:20px;" />
	     				</td>
	     				<th ng-hide="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">營運區：</th>
	   					<td ng-hide="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">
	   						<e-combobox id="area_id" name="area_id"
										ng-datasource="AREA_LIST"
										ng-model="inputVO.area_id"
										ng-validate="false" 
										ng-disabled="AVAIL_AREA.length == 1"
										ng-readonly="AVAIL_AREA.length == 1" 
										ng-editable="false"
										ng-format="F3"
										ng-required="true"
										ng-change="ChangeArea(region)"
										style="line-height:20px;" />
	   					</td>
	     				<th ng-hide="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">分行：</th>
	     				<td ng-hide="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">
	     					<e-combobox id="bra_nbr" name="bra_nbr"
										ng-datasource="BRANCH_LIST"
										ng-model="inputVO.bra_nbr"
										ng-validate="false" 
										ng-disabled="AVAIL_BRANCH.length == 1"
										ng-readonly="AVAIL_BRANCH.length == 1" 
										ng-editable="false"
										ng-format="F1"
										ng-required="true"
										ng-change="ChangeBranch(region)"
										style="line-height:20px;" />
	     				</td>
	     				<th ng-show="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">業務處：</th>
						<td ng-show="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">
							<e-combobox id="region_center_id" name="region_center_id"
										ng-paramtype="PMS.UHRM_RC"
										ng-model="inputVO.region_center_id"
										ng-validate="false" 
										ng-disabled="true"
										ng-readonly="true" 
										ng-editable="false"
										ng-format="F3"
										ng-required="true"
										ng-change="ChangeRegion()"
										style="line-height:20px;" />
						</td>						
						<th ng-show="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">業務中心：</th>
						<td ng-show="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">
							<e-combobox id="branch_area_id" name="branch_area_id"
										ng-paramtype="PMS.UHRM_OP"
										ng-model="inputVO.branch_area_id"
										ng-validate="false" 
										ng-disabled="true"
										ng-readonly="true" 
										ng-editable="false"
										ng-format="F3"
										ng-required="true"
										ng-change="ChangeArea()"
										style="line-height:20px;" />
						</td>
						<th></th>
						<td></td>
	     			</tr>
     				<tr>
     					<th>查詢類別：</th>
     					<td>
     						<e-combobox id="query_type" 
										ng-datasource="mappingSet['query_type']"
										ng-model="inputVO.query_type"
			   							ng-validate="false" 
			   							ng-readonly="false" 
			   							ng-editable="false"
			   							ng-format="F3"
			   							ng-required="false"
			   							width="150px"
			   							style="line-height:20px;" />
     					</td>
     					<th>查詢年月：</th>
						<td>
							<e-combobox id="eTime"
										ng-datasource="mappingSet['timeE']"
										ng-model="inputVO.query_month"
									 	ng-validate="false" 
									 	ng-readonly="false" 
									 	ng-editable="false"
										ng-format="F3" 
										ng-required="false" 
										width="150px" 
										style="line-height:20px;" />
						</td>
						<th ng-hide="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">AO Code：</th> 
						<td ng-hide="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">
							<e-combobox id="inq_ao_code" name="inq_ao_code"
										ng-datasource="AO_LIST"
										ng-model="inputVO.inq_ao_code"
										ng-validate="false"
										ng-disabled="AVAIL_AO_CODE.length == 1"
										ng-readonly="AVAIL_AO_CODE.length == 1" 
										ng-editable="false"
										ng-format="F1"
										ng-required="true"
										ng-change="ChangeAo_code(region)"
										style="line-height:20px;" />
						</td>
						<th ng-show="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">UHRM：</th>
						<td ng-show="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">
	     					<e-combobox id="uEmpID" name="uEmpID"
										ng-datasource="mappingSet['UHRM_LIST']"
										ng-model="inputVO.inq_ao_code"
										ng-validate="false" 
										ng-disabled="mappingSet['UHRM_LIST'].length == 2"
										ng-readonly="mappingSet['UHRM_LIST'].length == 2" 
										ng-editable="false"
										ng-format="F3"
										ng-required="true"
										style="line-height:20px;" />				 
						</td>
     				</tr>
				</table>
			</div>
			<div class="search_box_btn text-center">
				<button type="button" class="btn btn-info" ng-click="inquireInit();inquire();" ng-disabled="!inputVO.query_type || !inputVO.query_month || ((!memLoginFlag.startsWith('UHRM') || memLoginFlag == 'UHRM') && !inputVO.bra_nbr)" function-type="query">查詢</button>
				<button type="button" class="btn btn-info" ng-click="init()">清除</button>
				<br>
				<label class="with-errors" ng-show="!inputVO.query_type || !inputVO.query_month || !inputVO.bra_nbr" ng-hide="memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM'">請選擇查詢類別及年月及分行</label>
				<label class="with-errors" ng-show="!inputVO.query_type || !inputVO.query_month || !inputVO.bra_nbr" ng-hide="!(memLoginFlag.startsWith('UHRM') && memLoginFlag != 'UHRM')">請選擇查詢類別及年月</label>
				
			</div>
		</div>
	</div>
	<!-- 結果區 -->
	<div>
		<div class="tfb_content">
			<div class="tfb_content_icon"></div>
			<div class="tfb_content_tit"><img src="assets/images/icon/tfb_icon_a15.gif" >查詢結果</div>
		</div>
		<!--Content of the panel-->
		<div class="panel_content">
			<e-jumping-once output="outputVO" list="dataList" totallist="resultList"></e-jumping-once>
			<div class="gv_tab_sc scroll_y" style="min-height:235px;white-space: nowrap;">
				<table class="table table-bordered">
					<thead>
						<tr>
<!-- 							<th> -->
<!-- 								<label> -->
<!-- 									<input type='checkbox' ng-model='clickAll' ng-change='checkrow()' /> 全選 -->
<!-- 								</label> -->
<!-- 							</th> -->
							<th>加入銷售計畫</th>
							<th>自建待辦</th>
							<th>名單與代辦工作</th>
							<th>客戶ID</th>
							<th>客戶姓名</th>
							<th>分行代碼</th>
							<th>分行名稱</th>
							<th>OBU客戶</th>
							<th>上月平均AUM</th>
							<th>上月底AO</th>
							<th>原AO Code</th>
							<th>新AO Code</th>
							<th>目前AO Code</th>
							<th>理專員編</th>
							<th>原理專姓名</th>
							<th>變更日期時間</th>
						</tr>
					</thead>
					<tbody>
						<tr class="repeat-row" ng-repeat="row in dataList track by $index" ng-class-odd="'rowOdd'" ng-class-even="'rowEven'">
<!-- 							<td><input type='checkbox' ng-model='row.SELECTED' /></td> -->
							<td class="td_center"><button type="button" class="btn btn-info" ng-click="add(row)" function-type="maintenance">加入</button></td>
							<td class="td_center"><a class="btn btn-info btn-circle" ng-click = "openCUS160_ADD(row)"><i class="glyphicon glyphicon-plus"></i></a></td>
							<td class="td_center"><a class="btn btn-info btn-circle" ng-click = "cam200(row)"><i class="glyphicon glyphicon-zoom-in"></i></a></td>
							<td><a href="#" ng-click="detail(row.CUST_ID)">{{row.CUST_ID}}</a></td>		<!-- 客戶ID -->
							<td>{{row.CUST_NAME}}</td>          <!-- 客戶姓名 -->
							<td>{{row.BRA_NBR}}</td>            <!-- 分行代碼 -->
							<td>{{row.BRA_NAME}}</td>        <!-- 分行名稱 -->
							<td>{{row.OBU_YN}}</td>             <!-- OBU客戶 -->
							<td class="td_center">{{row.AVG_AUM_AMT | number:0}}</td>        <!-- 上月平均AUM -->
							<td>{{row.LM_AO_CODE}}</td>   <!-- 上月底AO -->
							<td>{{row.ORG_AO_CODE}}</td>        <!-- 原AO Code -->
							<td>{{row.NEW_AO_CODE}}</td>        <!-- 新AO Code -->
							<td>{{row.CUR_AO_CODE}}</td>        <!-- 目前AO Code -->
							<td>{{row.EMP_ID}}</td>             <!-- 理專員編 -->
							<td>{{row.ORG_AO_NAME}}</td>        <!-- 原理專姓名 -->
							<td>{{row.LETGO_DATETIME}}</td>     <!-- 變更日期時間 -->
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<!-- 結果區 -->
</div>