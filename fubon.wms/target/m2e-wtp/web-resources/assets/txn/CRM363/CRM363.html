<style>

</style>
<div class="CRM363" ng-controller="CRM363Controller" ng-cloak>
	<div class="tfb_content">
		<div class="tfb_content_icon"></div>
		<div class="tfb_content_tit"><img src="assets/images/icon/tfb_icon_a15.gif" >主管覆核客戶移轉</div>
	</div>
	<!--Content of the panel-->
	<div class="panel_content">
		<div class="search_table search_box">
			<form name="parameterTypeEditForm2" class="form-horizontal" data-toggle="validator" role="form" autocomplete="off" enter-as-tab>
				<table>
	   				<tr>
						<th>專案類型：</th>
						<td><e-combobox id="PRJ_TYPE" name="PRJ_TYPE" 
							ng-datasource="TRS_PRJ_TYPE"
					       	ng-model="inputVO.PRJ_TYPE"
					       	ng-validate="false" 
					       	ng-readonly="false" 
					       	ng-editable="false"
					       	ng-format="F3"
					       	ng-required="false"		
					       	ng-change="getAllPRJ()"		         
			       			style="line-height:20px;" />
			       		</td>
						<th>專案名稱：</th>
						<td><e-combobox id="PRJ_ID" name="PRJ_ID" 
							ng-datasource="TRS_PROJNAME"
					       	ng-model="inputVO.PRJ_ID"
					       	ng-validate="false" 
					       	ng-readonly="false" 
					       	ng-editable="false"
					       	ng-format="F3"
					       	ng-required="false"
					       	ng-change="prjIdChanged();"				         
			       			style="line-height:20px;" />
			       		</td>
			       		<th></th>
	   					<td></td>
					</tr>
	   				<tr>
	   					<th>分行別：</th>
	   					<td>
	   						<e-combobox id="branch_nbr" name="branch_nbr"
							ng-datasource="mappingSet['branchNbr']"
							ng-model="inputVO.org_branch_nbr"
							ng-change="getAolist1()"
							ng-validate="false" 
							ng-disabled="bra_list.length == 1"
							ng-readonly="bra_list.length == 1"
							ng-editable="false"
							ng-format="F1"
							ng-required="pri_id == '043' || pri_id == '044'"
							style="line-height:20px;" />
	   					</td>
	   					<th>新理專：</th>
	   					<td>
	   						<e-combobox id="org_ao_code"
							ng-datasource="ao_code_project"
							ng-model="inputVO.org_ao_code"
							ng-validate="false" 
							ng-disabled = "true"
							ng-readonly = "ao_code.length == 1"
							ng-editable="false"
							ng-format="F1"
							ng-required="false"
							style="line-height:20px;" />
	   					</td>
	   					<th></th>
	   					<td></td>
	   				</tr>
	   				<tr ng-show="parameterTypeEditForm2.branch_nbr.$error.required">
	   					<th></th>
	   					<td></td>
	   					<th></th>
	   					<td class="with-errors">請選擇分行別</td>
	   					<th></th>
	   					<td></td>
					<tr>
	   				<tr>
	   					<th>客戶ID：</th>
	   					<td>
	   						<input type="text" class="form-control" style="width:260px;text-transform:uppercase;" placeholder="請輸入..." id="cust_id" name="cust_id" ng-model="inputVO.cust_id" e-length-limit="15">
	   					</td>
	   					<th>等級：</th>
	   					<td>
	   						<e-combobox id="con_degree"
							ng-paramtype="CRM.CON_DEGREE"
							ng-model="inputVO.con_degree"
							ng-validate="false" 
							ng-editable="false"
							ng-format="F3"
							ng-required="false"
							style="line-height:20px;" />
	   					</td>
	   					<th>最近異動頻率：</th>
	   					<td>
	   						<e-combobox id="chg_frq"
							ng-datasource="CHG_FRQ"
							ng-model="inputVO.chg_frq"
							ng-validate="false" 
							ng-editable="false"
							ng-format="F3"
							ng-required="false"
							ng-disabled = "true"
							style="line-height:20px;" />
	   					</td>
	   				</tr>
	   				<tr>
	   					<th>客戶姓名：</th>
	   					<td>
	   						<input type="text" class="form-control" style="width:260px;" placeholder="請輸入..." id="cust_name" name="cust_name" ng-model="inputVO.cust_name" e-length-limit="15">
	   					</td>
	   					<th>客群身分：</th>
	   					<td>
	   						<e-combobox id="vip_degree"
							ng-paramtype="CRM.VIP_DEGREE"
							ng-model="inputVO.vip_degree"
							ng-validate="false" 
							ng-editable="false"
							ng-format="F3"
							ng-required="false"
							style="line-height:20px;" />
	   					</td>
	   					<th>經營頻次符合度：</th>
	   					<td>
	   						<e-combobox id="match_yn"
							ng-datasource="MATCH_YN"
							ng-model="inputVO.match_yn"
							ng-validate="false" 
							ng-editable="false"
							ng-format="F3"
							ng-required="false"
							ng-disabled = "true"
							style="line-height:20px;" />
	   					</td>
	   				</tr>
				</table>
			</form>
		</div>
		<div class="search_box_btn text-center">
			<button type="button" class="btn btn-info" ng-click="inquireInit();inquire();">查詢</button>
			<button type="button" class="btn btn-info" ng-click="init();inquireInit();">清除</button>
			<button type="button" class="btn btn-info" ng-click="exportData()" ng-show="pri_id == '043' || pri_id == '044'">匯出</button>
			<button type="button" class="btn btn-info" ng-click="exportAllData()" ng-show="pri_id == '043' || pri_id == '044'">全部匯出</button>
		</div>
	</div>
	<div class="tfb_content">
		<div class="tfb_content_icon"></div>
		<div class="tfb_content_tit"><img src="assets/images/icon/tfb_icon_a15.gif" >查詢結果</div>
	</div>
	<!--Content of the panel-->
	<div class="panel_content">
		<!-- 結果區 -->
		<div class="search_table search_box">
			<form name="parameterTypeEditForm" class="form-horizontal" data-toggle="validator" role="form" autocomplete="off" enter-as-tab>
				<table ng-hide="pri_id == '043' || pri_id == '044'">
					<tr>
						<th>新分行別：</th>
						<td>
							<e-combobox id="new_branch_nbr"
							ng-datasource="mappingSet['branchNbr']"
							ng-model="inputVO2.new_branch_nbr"
							ng-change="getAolist2()"
							ng-validate="false"
							ng-disabled="bra_list.length == 1"
							ng-readonly="bra_list.length == 1"
							ng-editable="false"
							ng-format="F1"
							ng-required="false"
							style="line-height:20px;" />
						</td>
						<th>新理專：</th>
						<td>
							<e-combobox id="new_ao_code"
							ng-datasource="ao_code_project2"
							ng-model="inputVO2.new_ao_code"
							ng-validate="false" 
							ng-editable="false"
							ng-format="F1"
							ng-required="false"
							ng-change="setNewAo()"
							style="line-height:20px;" />
						</td>
					</tr>
					<tr>
						<th>處理方式：</th>
						<td>
							<e-combobox id="process_type" name="process_type"
							ng-datasource="PROCESS_TYPE"
							ng-model="inputVO2.process_type"
							ng-validate="false" 
							ng-editable="false"
							ng-disabled="true"
							ng-readonly="true"
							ng-format="F3"
							ng-required="true"
							style="line-height:20px;" />
						</td>
						<th></th>
						<td>
							<button type="button" class="btn btn-info" ng-click="save()">確定儲存</button>
						</td>
					</tr>
					<tr ng-show="parameterTypeEditForm.process_type.$error.required">
						<th></th>
						<th class="with-errors">請選擇處理方式</th>
						<th></th>
						<th></th>
					</tr>
				</table>
			</form>
		</div>
		<e-jumping-once output="outputVO" list="paramList" totallist="resultList"></e-jumping-once>
		<div class="gv_tab_sc scroll_y" style="min-height:235px;white-space: nowrap;">
			<table class="table table-bordered td_center">
				<thead>
					<tr>
						<th ng-hide="pri_id == '043' || pri_id == '044'">
							<label>
								<input type='checkbox' ng-model='clickAll' ng-change='checkrow()' function-type="maintenance" /> 本頁全選
							</label>
							<br>
							<label>
								<input type='checkbox' ng-model='clickAll2' ng-change='checkrow2()' function-type="maintenance" /> 全選
							</label>
						</th>
						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="COMPLAIN_YN" e-query="inquire()">客訴</e-sorter></th>
<!-- 						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="AGMT_SEQ" e-query="inquire()">同意書</e-sorter></th> -->
						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="CUST_ID" e-query="inquire()">客戶ID</e-sorter></th>
						<th>客戶姓名</th>
<!-- 						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="TRS_TYPE" e-query="inquire()">理專調整類別</e-sorter></th> -->
<!-- 						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="OVER_CUST_NO_LIMIT_UP_YN" e-query="inquire()">是否超過<br/>最適客戶</e-sorter></th> -->
						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="CON_DEGREE" e-query="inquire()">等級</e-sorter></th>
						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="VIP_DEGREE" e-query="inquire()">客群身分</e-sorter></th>
						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="AUM_AMT" e-query="inquire()">AUM</e-sorter></th>
						<th ng-show="inputVO.PRJ_TYPE == '2'">原經營滿5年<br/>理專分行</th>
						<th ng-show="inputVO.PRJ_TYPE == '2'">原經營滿5年<br/>理專</th>
						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="NEW_AO_BRH" e-query="inquire()">現行分行</e-sorter></th>
						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="CHGLOG_AO_CODE" e-query="inquire()">現行理專</e-sorter></th>
						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="NEW_AO_BRH" e-query="inquire()">新分行</e-sorter></th>
						<th><e-sorter e-input="inputVO" e-mode="auto" e-col="NEW_AO_CODE" e-query="inquire()">新理專</e-sorter></th>
						<th>異動原因</th>
					</tr>
				</thead>
				<tbody>
					<tr class="repeat-row" ng-repeat="row in paramList track by $index | limitTo:displayLimit" ng-class-odd="'rowOdd'" ng-class-even="'rowEven'">
						<td ng-hide="pri_id == '043' || pri_id == '044'">
							<label style="font-weight: initial;margin-bottom: 0px;">
								<input type='checkbox' ng-model='row.SELECTED' function-type="maintenance">勾選
							</label>
						</td>
						<td>{{row.COMPLAIN_YN | mapping:COM_YN:'F3'}}</td>
<!-- 						<td><button ng-if="row.AGMT_SEQ && row.AGMT_FILE" type="button" class="btn btn-info" ng-click="download(row)">同意書</button></td> -->
						<td><a href="#" onclick="return false" ng-click="detail(row)">{{row.CUST_ID}}</a></td>
						<td>{{row.CUST_NAME}}</td>
<!-- 						<td>{{row.CHG_TYPE | mapping:CHG_TYPE:'F3'}}</td> -->
<!-- 						<td>{{row.OVER_CUST_NO_LIMIT_UP_YN | mapping:COM_YN:'F3'}}</td> -->
						<td>{{row.CON_DEGREE | mapping:CON_DEGREE:'F3'}}</td>
						<td>{{row.VIP_DEGREE | mapping:VIP_DEGREE:'F3'}}</td>
						<td class="td_right">{{row.AUM_AMT | currency:'':0}}</td>
						<td ng-show="inputVO.PRJ_TYPE == '2'">{{row.RM_AO_BRANCH_NBR}}-{{row.RM_AO_BRANCH_NAME}}</td>
						<td ng-show="inputVO.PRJ_TYPE == '2'">{{row.RM_AO_EMP_ID}}-{{row.RM_EMP_NAME}}</td>
						<td>{{row.NEW_AO_BRH}}-{{row.NEW_BRANCH_NAME}}</td>
						<td>{{row.CHGLOG_AO_CODE}}-{{row.CHGLOG_EMP_NAME}}{{row.CHGLOG_AO_TYPE}}</td>
						<td>{{row.NEW_AO_BRH}}-{{row.NEW_BRANCH_NAME}}</td>
						<td ng-hide="pri_id == '043' || pri_id == '044'">
							<e-combobox id="ROW_NEW_AO_CODE"
							ng-datasource="new_ao_list"
							ng-model="row.NEW_AO_CODE"
							ng-validate="false" 
							ng-disabled="row.AGMT_SEQ || row.TRS_TXN_SOURCE == '2'"
							ng-readonly="row.AGMT_SEQ || row.TRS_TXN_SOURCE == '2'" 
							ng-editable="false"
							ng-format="F1"
							ng-required="false"
							ng-change="setNewBnr(row)"
							style="line-height:20px;" />
						</td>
						<td ng-show="pri_id == '043' || pri_id == '044'">{{row.NEW_AO_CODE}}-{{row.NEW_AO_NAME}}{{row.NEW_AO_TYPE}}</td>
						<td>{{row.APL_REASON | mapping:TRS_APL_REASON:'F3'}}-{{row.APL_OTH_REASON}}</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>