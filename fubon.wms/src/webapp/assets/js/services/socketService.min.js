eSoafApp.factory("socketService",["$rootScope","$http","$q","$timeout","sysInfoService","ngDialog",function(e,t,r,a,n,o){return{sendRecv:function(i,c,d,s){s.pageCount=s.pageCount||n.$paging.rowCountLimit;var u={},l=12e4;u.header={},u.header.InputVOClass=d,u.header.TxnCode=i,u.header.BizCode=c,u.header.StampTime=!0,u.header.SupvPwd="",u.header.TXN_DATA={},u.header.SupvID="",u.header.CustID="",u.header.ApplicationID=e.ApplicationID,u.header.BranchID=e.BranchID,u.header.REQUEST_ID="",u.header.TlrID=e.TlrID,u.header.ClientTransaction=!0,u.header.DevMode=!1,u.header.WsID=e.WsID,u.header.SectionID="esoaf",u.header.TRMSEQ="32",u.header["X-Content-Type-Options"]="nosniff",u.header["X-XSS-Protection"]="1; mode=block",u.header["Content-Security-Policy"]="default-src 'none';",u.header["Referrer-Policy"]="no-referrer",u.body=s;var g=!0,h=n.getServerParameter(),p=function(){$.map(h,function(e){e.DATA.toString().trim()===i.toString().trim()&&(flag=!0,l=60*parseInt(e.LABEL.toString().trim())*1e3)})[0]};if(function(){$.map(h,function(e){"DEFAULT"===e.DATA.toString().trim()&&(flag=!0,l=60*parseInt(e.LABEL.toString().trim())*1e3)})[0]}(),p(),-1!==n.Exclude.code.indexOf(i)&&(g=!1),g)var f=o.open({template:'<div><img style="display:block; margin:auto;vertical-align:middle;" width="100px" height="100px" src="./resource/cat.gif"></div>',plain:!0,showClose:!1,closeByDocument:!1,closeByEscape:!1,className:"loading-Img"}),m=a(function(){f&&f.close()},l);var S=JSON.stringify(u);return t({method:"POST",url:"./EsoafDispatcher",data:S,timeout:l}).then(function(t){return a.cancel(m),f&&f.close(),e.resetLogout&&e.resetLogout(),t.data},function(t){return a.cancel(m),f&&f.close(),e.resetLogout&&e.resetLogout(),angular.isObject(t.data)&&t.data.message?r.reject(t.data.message):r.reject("An unknown error occurred.")})},getMenu:function(e,a){return t({method:"POST",url:constServiceAddr+"/GetMenu",data:{UserId:e,RoleID:a},timeout:12e4}).then(function(e){return e.data},function(e){return angular.isObject(e.data)&&e.data.message?r.reject(e.data.message):r.reject("An unknown error occurred.")})}}}]);