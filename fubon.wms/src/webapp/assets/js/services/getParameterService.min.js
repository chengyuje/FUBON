eSoafApp.factory("getParameter",["$rootScope","$http","$q","$timeout","sysInfoService","socketService",function(e,r,t,a,n,o){return{XML:function(r,a,n){if(r){(function(){var a=t.defer();if(!n&&angular.isDefined(e.server)&&e.server.id.length>0)if("[object String]"===Object.prototype.toString.call(r)){if(-1!==e.server.id.indexOf(r))return a.resolve(angular.copy({key:[r],data:[e.server.data[e.server.id.indexOf(r)]]})),a.promise}else if("[object Object]"===Object.prototype.toString.call(r)){if(-1!==e.server.id.indexOf(r.param_type))return a.resolve(angular.copy({key:[r.param_type],data:[e.server.data[e.server.id.indexOf(r.param_type)]]})),a.promise}else if("[object Array]"===Object.prototype.toString.call(r)){for(var o={key:[],data:[]},d=0;d<r.length;d++)-1!==e.server.id.indexOf(r[d])&&(o.key.push(e.server.id[e.server.id.indexOf(r[d])]),o.data.push(e.server.data[e.server.id.indexOf(r[d])]));if(o.key.length>0)return a.resolve(angular.copy(o)),a.promise}return a.reject(),a.promise})().then(function(e){var n=e,d=t.defer();if("[object Array]"===Object.prototype.toString.call(r)&&r.length!==e.key.length){return(d.resolve(o.sendRecv("XMLInfo","getXMLInfo","com.systex.jbranch.common.xmlInfo.XMLInfoInputVO",{xmlInfoList:r}).then(function(t){if(a){if(!t||!t[0].body.xmlInfoList[0]||0===t[0].body.xmlInfoList[0].length)return a(!1);for(var o=t[0].body.xmlInfoList[0],d=0;d<r.length;d++)-1===e.key.indexOf(r[d])&&(n.key.push(r[d]),n.data.push(o.data[o.key.indexOf(r[d])]))}})),d.promise).then(function(){a(angular.copy(n))})}a(angular.copy(n))},function(){"[object String]"===Object.prototype.toString.call(r)?o.sendRecv("COMBOBOX","query","com.systex.jbranch.commons.ap.combobox.QueryInputVO",{param_type:r,desc:!1}).then(function(t){if(a){if(!t||!t[0].body.result||0===t[0].body.result.length)return a(!1);var n=e.server.id.indexOf(r);-1===n?(e.server.id.push(angular.copy(r)),e.server.data.push(angular.copy(t[0].body.result))):(e.server.id[n]=angular.copy(r),e.server.data[n]=angular.copy(t[0].body.result)),a(angular.copy({key:[r],data:[t[0].body.result]}))}},function(e){}):"[object Object]"===Object.prototype.toString.call(r)?o.sendRecv("COMBOBOX","query","com.systex.jbranch.commons.ap.combobox.QueryInputVO",r).then(function(t){if(a){if(!t||!t[0].body.result||0===t[0].body.result.length)return a(!1);var o=e.server.id.indexOf(r.param_type);n||(-1===e.server.id.indexOf(o)?(e.server.id.push(angular.copy(r.param_type)),e.server.data.push(angular.copy(t[0].body.result))):(e.server.id[o]=angular.copy(r.param_type),e.server.data[o]=angular.copy(t[0].body.result))),a(angular.copy({key:[r.param_type],data:[t[0].body.result]}))}},function(e){}):"[object Array]"===Object.prototype.toString.call(r)&&o.sendRecv("XMLInfo","getXMLInfo","com.systex.jbranch.common.xmlInfo.XMLInfoInputVO",{xmlInfoList:r}).then(function(r){if(a){if(!r||!r[0].body.xmlInfoList[0]||0===r[0].body.xmlInfoList[0].length)return a(!1);for(var t=r[0].body.xmlInfoList[0],o={key:[],data:[]},d=0;d<t.key.length;d++)-1!==e.server.id.indexOf(t.key[d])?n?(e.server.data[e.server.id.indexOf(t.key[d])]=angular.copy(t.data[d]),o.key.push(t.key[d]),o.data.push(t.data[d])):(o.key.push(e.server.id[e.server.id.indexOf(t.key[d])]),o.data.push(e.server.data[e.server.id.indexOf(t.key[d])])):(e.server.id.push(angular.copy(t.key[d])),e.server.data.push(angular.copy(t.data[d])),o.key.push(t.key[d]),o.data.push(t.data[d]));a(angular.copy(o))}},function(e){})})}},CUSTOM:function(a,o,d,i,s){i.pageCount=i.pageCount||n.$paging.rowCountLimit;var c={header:{}};c.header.InputVOClass=d,c.header.TxnCode=a,c.header.BizCode=o,c.header.StampTime=!0,c.header.SupvPwd="",c.header.TXN_DATA={},c.header.SupvID="",c.header.CustID="",c.header.ApplicationID=e.ApplicationID,c.header.BranchID=e.BranchID,c.header.REQUEST_ID="",c.header.TlrID=e.TlrID,c.header.ClientTransaction=!0,c.header.DevMode=!1,c.header.WsID=e.WsID,c.header.SectionID="esoaf",c.header.TRMSEQ="32",c.header["X-Content-Type-Options"]="nosniff",c.header["X-XSS-Protection"]="1; mode=block",c.header["Content-Security-Policy"]="default-src 'none';",c.header["Referrer-Policy"]="no-referrer",c.body=i;var u=angular.copy(JSON.stringify(c));return function(){var r=t.defer();if(!s&&angular.isDefined(e.server)&&e.server.id.length>0)for(var n=0;n<e.server.id.length;n++)if("[object Object]"===Object.prototype.toString.call(e.server.id[n])&&e.server.id[n].name==a&&e.server.id[n].method==o)return r.resolve(angular.copy(e.server.data[n])),r.promise;return r.reject(),r.promise}().then(function(e){return angular.copy(e)},function(){return r({method:"POST",url:"./EsoafDispatcher",data:u,timeout:12e4}).then(function(r){return function(){if(!r||!r.data||!r.data[0].body||0===r.data[0].body.length)return n.resolve(!1),n.promise;for(var n=t.defer(),d=!1,i=0;i<e.server.id.length;i++)"[object Object]"===Object.prototype.toString.call(e.server.id[i])&&e.server.id[i].name==a&&e.server.id[i].method==o&&(d=!0,e.server.data[i]=r.data);return d||(e.server.id.push({name:a,method:o}),e.server.data.push(r.data)),n.resolve(r.data),n.promise}().then(function(e){return angular.copy(e[0].body)})},function(e){return!1})})}}}]);