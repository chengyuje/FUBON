eSoafApp.factory("sysInfoService",["$rootScope","$q",function(e,r){e.mobile="mobile"==sessionStorage.CMFPG000_MOBILE_LOGIN,e.navigator=!(null===navigator.userAgent.match("Safari")||!navigator.userAgent.match("Safari")),e.server={id:[],data:[]},e.system={platform:{type:[],code:[],info:[]},component:{type:[],code:[],info:[]}},e.mode={pressure:{$record:!1,$test:!1}};var n=function(e,n){for(var t=!1,s=r.defer(),o=0;o<e.length;o+=1)if(e[o]===n){t=!0,s.resolve(o);break}return t||s.reject(),s.promise},t=r.defer();if(-1===e.system.platform.type.indexOf("location")?(e.system.platform.type.push("location"),e.system.platform.code.push(!0),e.system.platform.info.push(document.location.hostname)):e.system.platform.info[e.system.platform.type.indexOf("location")]=document.location.hostname,t.resolve(),t.promise.then(function(){setLocation(e)}),e.$counter={visit:[],total:[]},n(e.system.platform.type,"logout").then(function(e){},function(){e.system.platform.type.push("logout"),e.system.platform.code.push(0),e.system.platform.info.push({status:!1,classic:!1,URL:{$test:unfaker("%20L%23%23%23%23o%3F%3F%3F%3Fg%23%23i%20%20n%23.%3F%3F%3F%3Fh%3F%3F%3Ft%23%23m%20l"),$official:"",$official_test:""}})}),arguments.callee._singletonInstance)return arguments.callee._singletonInstance;var i={};function s(e){for(var n=x2js.xml_str2json(e),t=n.Root.Menu.length-1;0<=t;t--){var s=n.Root.Menu[t]._GroupID;"HIDE"==s||"05CRM"!=s&&n.Root.Menu.splice(t,1)}i.MenuInfo=n.Root.Menu}function o(e){var n=x2js.xml_str2json(e);if(i.Marquee=[],n.WorkList.Announce_asArray)try{for(var t=n.WorkList.Announce_asArray.length,s=0;s<t;s++){var o=n.WorkList.Announce_asArray[s].Item;"Broad"===o._DisplayPanel&&i.Marquee.push(o._Content)}}catch(e){}}return i.$paging={},i.$paging.rowCountLimit=10,i.$currentModule="WMS",i.UserInfo={},i.RoleName="",i.OrganizationID="IB",i.TxnInfo={},i.MenuInfo={},i.SysParam={},i.Marquee=[],i.Exclude={controller:["CMFPG000Controller","CRM124Controller","DialogAlertController"],title:["{{data.title}}","待辦事項提醒"],ID:["MARQUEEController"],code:["COMBOBOX","XMLInfo"],IP:[unfaker("%211%3F%3F%3F%3F%3F%3F27%3F%3F%3F%3F%3F.%23%23%23%23%23%23%23%23%230%21%21.%20%20%20%20%20%20%20%20%200%23%23%23.%23%23%23%23%231"),unfaker("%20%20%20%20%20%20%20%20l%21%21%21%21%21%21%21%21oc%21%21%21%21%21%21a%3F%3F%3F%3F%3F%3F%3F%3Fl%21%21%21%21h%20%20%20o%20%20%20s%3F%3F%3F%3F%3F%3Ft")]},i.Browser=detectBrowser(),i.parseMenu=function(e){s(e)},i.parseMarquee=function(e){o(e)},i.getApServerName=function(){return sessionStorage.apServerName},i.setApServerName=function(e){sessionStorage.apServerName=e},i.getNavigator=function(){return sessionStorage.Navigator},i.setNavigator=function(e){sessionStorage.Navigator=e},i.getSinglePageRows=function(){return sessionStorage.SinglePageRows?JSON.parse(sessionStorage.SinglePageRows):[{DATA:"DEFAULT",LABEL:"50"}]},i.setSinglePageRows=function(e){sessionStorage.SinglePageRows=e?JSON.stringify(e):[{DATA:"DEFAULT",LABEL:"50"}]},i.getMarqueeParameter=function(){return sessionStorage.MarqueeParameter?JSON.parse(sessionStorage.MarqueeParameter):[{DATA:"PERIOD",LABEL:"15"}]},i.setMarqueeParameter=function(e){sessionStorage.MarqueeParameter=e?JSON.stringify(e):[{DATA:"PERIOD",LABEL:"15"}]},i.getFileParameter=function(){return sessionStorage.FileParameter?JSON.parse(sessionStorage.FileParameter):[{DATA:"DEFAULT",LABEL:"10"}]},i.setFileParameter=function(e){sessionStorage.FileParameter=e?JSON.stringify(e):[{DATA:"DEFAULT",LABEL:"10"}]},i.getServerParameter=function(){return sessionStorage.ServerParameter?JSON.parse(sessionStorage.ServerParameter):[{DATA:"DEFAULT",LABEL:"2"}]},i.setServerParameter=function(e){sessionStorage.ServerParameter=e?JSON.stringify(e):[{DATA:"DEFAULT",LABEL:"2"}]},i.getDialogCounts=function(){return sessionStorage.DialogCounts?JSON.parse(sessionStorage.DialogCounts):void 0},i.setDialogCounts=function(e){sessionStorage.DialogCounts=e?JSON.stringify(e):void 0},i.getUser=function(){return JSON.parse(sessionStorage.User)},i.setUser=function(e){sessionStorage.User=JSON.stringify(e)},i.getUserID=function(){return sessionStorage.UserID},i.setUserID=function(e){sessionStorage.UserID=e},i.getUserName=function(){return sessionStorage.UserName},i.setUserName=function(e){sessionStorage.UserName=e},i.getUserList=function(){return JSON.parse(sessionStorage.UserList)},i.setUserList=function(e){sessionStorage.UserList=JSON.stringify(e)},i.getApplicationID=function(){return sessionStorage.ApplicationID},i.setApplicationID=function(e){sessionStorage.ApplicationID=e},i.getAoCode=function(){return JSON.parse(sessionStorage.AoCode)},i.setAoCode=function(e){sessionStorage.AoCode=JSON.stringify(e)},i.getBranchID=function(){return sessionStorage.BranchID},i.setBranchID=function(e){sessionStorage.BranchID=e},i.getAreaID=function(){return sessionStorage.AreaID},i.setAreaID=function(e){sessionStorage.AreaID=e},i.getRegionID=function(){return sessionStorage.RegionID},i.setRegionID=function(e){sessionStorage.RegionID=e},i.getDefaultBranch=function(){return sessionStorage.DefaultBranch},i.setDefaultBranch=function(e){sessionStorage.DefaultBranch=e},i.getBranchName=function(){return sessionStorage.BranchName},i.setBranchName=function(e){sessionStorage.BranchName=e},i.getWsID=function(){return sessionStorage.WsID},i.setWsID=function(e){sessionStorage.WsID=e},i.getRoleID=function(){return sessionStorage.RoleID},i.setRoleID=function(e){sessionStorage.RoleID=e},i.getRoleName=function(){return sessionStorage.RoleName},i.setRoleName=function(e){sessionStorage.RoleName=e},i.getMenu=function(){return JSON.parse(sessionStorage.Menu)},i.setMenu=function(e){sessionStorage.Menu=JSON.stringify(e)},i.getAuthorities=function(){return JSON.parse(sessionStorage.Authorities)},i.setAuthorities=function(e){sessionStorage.Authorities=JSON.stringify(e)},i.getI18N=function(){return sessionStorage.I18N?JSON.parse(sessionStorage.I18N):null},i.setI18N=function(e){sessionStorage.I18N=JSON.stringify(e)},i.getAvailBranch=function(){return JSON.parse(sessionStorage.AvailBranch)},i.setAvailBranch=function(e){sessionStorage.AvailBranch=JSON.stringify(e)},i.getAvailRegion=function(){return JSON.parse(sessionStorage.AvailRegion)},i.setAvailRegion=function(e){sessionStorage.AvailRegion=JSON.stringify(e)},i.getAvailArea=function(){return JSON.parse(sessionStorage.AvailArea)},i.setAvailArea=function(e){sessionStorage.AvailArea=JSON.stringify(e)},i.getWATERMARK=function(){return JSON.parse(sessionStorage.WATERMARK)},i.setWATERMARK=function(e){sessionStorage.WATERMARK=JSON.stringify(e)},i.getLoginID=function(){return JSON.parse(sessionStorage.LoginID)},i.setLoginID=function(e){sessionStorage.LoginID=JSON.stringify(e)},i.getPriID=function(){return JSON.parse(sessionStorage.PriID)},i.setPriID=function(e){sessionStorage.PriID=JSON.stringify(e)},i.getMemLoginFlag=function(){return JSON.parse(sessionStorage.MemLoginFlag)},i.setMemLoginFlag=function(e){sessionStorage.MemLoginFlag=JSON.stringify(e)},i.findTxnInfo=function(e){return i.TxnInfo[e]},i.parseUserInfo=function(e){var n;n=e,e=JSON.parse(n.d),i.UserInfo=JSON.parse(e.UserInfo),n=x2js.xml_str2json(e.SysParam),i.SysParam=n.root,s(e.Menu),function e(n){var t=n.length;for(var s=0;s<t;s++){var o,r=n[s];"M"===r._Type?e(r.Menu_asArray):"P"!==r._Type&&"H"!==r._Type||(o=r._MenuCode,i.TxnInfo[o]=r)}}(i.MenuInfo),o(e.WorkItem)},i.getLoginSourceToken=function(){return sessionStorage.loginSourceToken},i.setLoginSourceToken=function(e){sessionStorage.loginSourceToken=e},i.getCurrentUserId=function(){return sessionStorage.currentUserId},i.setCurrentUserId=function(e){sessionStorage.currentUserId=e},i.getIsUHRM=function(){return JSON.parse(sessionStorage.isUHRM)},i.setIsUHRM=function(e){sessionStorage.isUHRM=JSON.stringify(e)},i.getTempUserInfo=function(){return sessionStorage.tempUserInfo?JSON.parse(sessionStorage.tempUserInfo):null},i.setTempUserInfo=function(e){sessionStorage.tempUserInfo=e?JSON.stringify(e):null},arguments.callee._singletonInstance=i}]);
