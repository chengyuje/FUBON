/**================================================================================================
@program: eLengthLimit.js
@description: 
@version: 1.0.20170313
=================================================================================================*/
eSoafApp.directive("eLengthLimit",function(){return{restrict:"A",require:"ngModel",link:function(e,n,r,t){t&&t.$parsers.unshift(function(e){var n=!1,i=r.eLengthLimit||0,f=r.eLengthType||"UTF8";if(void 0!=e){var l=0;if("UTF8"==f)for(var g=0;g<e.length;g++)l+=encodeURIComponent(e.charAt(g)).replace(/%[A-F\d]{2}/g,"U").length;else if("HF"==f)for(var o,g=0;g<e.length;g++)for(o=e.charCodeAt(g);o>0;)l++,o>>=8;else"ND"==f&&(l=-1!=e.indexOf(".")?e.substring(0,e.indexOf(".")).length+e.substring(e.indexOf(".")+1,e.length).length:e.length);l>i&&(n=!0)}if(n){var h=t.$modelValue;return t.$setViewValue(h),t.$render(),h}return e})}}});