<!DOCTYPE html>
<html ng-app="eSoafApp">
	<head>
		<!-- InstanceBeginEditable name="doctitle" -->
		<title>富邦銀行財富管理系統</title>
		<!-- InstanceEndEditable -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<!-- platform icon -->
		<link rel="shortcut icon" href="assets/images/favicon.ico" type="image/x-icon" />
		
		<!-- CSS-framework: Bootstrap -->
		<link rel="stylesheet" media="screen" href="assets/css/bootstrap.min.css">
		<link rel="stylesheet" media="screen" href="assets/css/bootstrap-theme.min.css">
		<link rel="stylesheet" media="screen" href="assets/css/bootstrap-admin-theme.css">
		<link rel="stylesheet" href="assets/lib/angular-bootstrap-calendar/dist/css/angular-bootstrap-calendar.min.css">
		
		<!-- CSS-framework: AngularJS -->
		<link rel="stylesheet" type="text/css" href="assets/lib/Angular.MultiSelect/angular-multi-select.css" />
		<link rel="stylesheet" href="assets/lib/ngDialog/css/ngDialog.css">
		<link rel="stylesheet" href="assets/lib/ngDialog/css/ngDialog-theme-default.css">
		<link rel="stylesheet" href="assets/lib/ngDialog/css/ngDialog-theme-plain.css">
		<link rel="stylesheet" href="assets/lib/ngDialog/css/ngDialog-custom-width.css">
		
		<!-- CSS-framework: JQuery -->
		<link rel="stylesheet" href="assets/lib/JQuery.UI/jquery-ui.min.css">		
		<link rel="stylesheet" href="assets/lib/JQueyFileUpload/css/jquery.fileupload.css">
		
		<!-- CSS-others -->
		<link rel="stylesheet" href="assets/css/font-awesome/css/font-awesome.min.css">		
		<link rel='stylesheet' href="assets/lib/angular-bootstrap-colorpicker/css/colorpicker.css">
		<link rel='stylesheet' href="assets/lib/textAngular/dist/textAngular.css">
		<link rel="stylesheet" href="assets/lib/nvD3/css/nv.d3.css">
		
		<!-- CSS-Platform: initial -->
		<link rel="stylesheet" href="assets/css/fubon.css" />
		
		<!------------------------------------------------------------------------->
		<!-- 						                 						     -->
		<!-- 						   < Library >	 						     -->
		<!-- 						                 						     -->
		<!-- 						      JQuery 								 -->
		<!-- 						                 						     -->
		<!------------------------------------------------------------------------->
		<script src="assets/lib/JQuery/jquery-3.6.0.min.js"></script>
		<script src="assets/lib/JQuery/jquery-migrate-3.3.2.min.js"></script>
		<script src="assets/lib/JQuery.UI/jquery-ui.min.js" type="text/javascript"></script>
		<script src="assets/lib/FileSaver.min.js" type="text/javascript"></script>
		<script src="assets/lib/pdf.js" type="text/javascript"></script>
		<script src="assets/lib/pdf.worker.js" type="text/javascript"></script>
		
		<!------------------------------------------------------------------------->
		<!-- 						                 						     -->
		<!-- 						  < Framework > 						     -->
		<!-- 						                 						     -->
		<!-- 						    AngularJS 								 -->
		<!-- 						                 						     -->
		<!------------------------------------------------------------------------->
		<!-- 
		    		   CurrentVerion:
		   								AngularJS 1.5.5
		    	Adaptability Version:
		         						AngularJS 1.2x 支援 IE8+
		         						AngularJS 1.3x 支援 IE9+
		-->
		<!-- AngularJS Main Module -->
		<script src="assets/lib/Angular/angular.js" type="text/javascript"></script>
		<!-- AngularJS Main PlugIn Module -->
		<script src="assets/lib/Angular/angular-route.min.js" type="text/javascript"></script>
		<script src="assets/lib/Angular/angular-cookies.js" type="text/javascript"></script>
		<script src="assets/lib/Angular/angular-sanitize.js" type="text/javascript"></script>
		<script src="assets/lib/Angular/angular-touch.js" type="text/javascript"></script>
		<script src="assets/lib/angular-confirm.js" type="text/javascript"></script>
		<script src="assets/lib/ngDialog/js/ngDialog.js" type="text/javascript"></script>
		<script src="assets/lib/i18nDynamic/i18nDynamic.js" type="text/javascript"></script>
		<script src="assets/lib/i18nDynamic/i18nDynDictionary.js" type="text/javascript"></script>
		<script src="assets/lib/ng-caps-lock-master/ng-caps-lock.min.js" type="text/javascript"></script>	
		<!-- AngularJS Others PlugIn Module -->
		<script src="assets/lib/nvD3/js/d3.js" type="text/javascript"></script> <!-- Angular-nvD3 Chart -->
		<script src="assets/lib/nvD3/js/nv.d3.js" type="text/javascript"></script> <!-- Angular-nvD3 Chart --><!-- or use another assembly -->
		<script src="assets/lib/nvD3/js/angular-nvd3.js" type="text/javascript"></script> <!-- Angular-nvD3 Chart -->	
		<script src="assets/lib/angular-filter-master/dist/angular-filter.min.js"></script>	<!-- Angular-filter -->		
		<script src="assets/lib/lodash.js" type="text/javascript"></script> <!-- Angular Google Maps -->
		<script src="assets/lib/angular-simple-logger-master/dist/angular-simple-logger.min.js" type="text/javascript"></script> <!-- Angular Google Maps -->
		<script src="assets/lib/angular-google-maps-master/dist/angular-google-maps.min.js" type="text/javascript"></script> <!-- Angular Google Maps -->
		<script src="http://maps.googleapis.com/maps/api/js" type="text/javascript"></script> <!-- Angular Google Maps -->
		<script src="assets/lib/Angular/Chart.js" type="text/javascript"></script>   
		<script src="assets/lib/Angular/angular-chart.js" type="text/javascript"></script>
		<script src="assets/lib/angular-bootstrap-colorpicker/js/bootstrap-colorpicker-module.js" type="text/javascript"></script>
		<script src="assets/lib/textAngular/dist/textAngular-rangy.min.js" type="text/javascript"></script>
		<script src="assets/lib/textAngular/dist/textAngular-sanitize.min.js" type="text/javascript"></script>
		<script src="assets/lib/textAngular/dist/textAngular.min.js" type="text/javascript"></script>
		<script src="assets/lib/Angular.MultiSelect/angular-multi-select.js" type="text/javascript"></script>
				
		<!-- Others PlugIn Module -->
		<script src="assets/lib/Slimccroll/jquery.slimscroll.min.js" type="text/javascript"></script>
		<script src="assets/lib/rangy-core.js" type="text/javascript"></script>
		<script src="assets/lib/rangy-selectionsaverestore.js" type="text/javascript"></script>		
		<script src="assets/lib/JQueyFileUpload/jquery.iframe-transport.js" type="text/javascript"></script>
		<script src="assets/lib/JQueyFileUpload/jquery.fileupload.js" type="text/javascript"></script>
		<script src="assets/lib/fullcalendar/lib/moment.min.js" type="text/javascript"></script>
		<script src="assets/lib/angular-pdf/dist/angular-pdf.js" type="text/javascript"></script>
		
		<!-- angular-bootstrap-calendar -->
		<script src="assets/lib/interact.js" type="text/javascript"></script>
		<script src="assets/lib/angular-bootstrap-calendar/dist/js/angular-bootstrap-calendar-tpls.min.js" type="text/javascript"></script>
		
		<script src="assets/lib/Request/require.js" type="text/javascript"></script>
		<script src="assets/lib/Bootstrap/bootstrap.min.js" type="text/javascript"></script>
		
		<script src="assets/lib/sortable.js" type="text/javascript"></script>
		
		
		<script src="assets/lib/ui.bootstrap/ui-bootstrap-tpls-1.3.3.min.js" type="text/javascript"></script>
		
		<script>
			var bsButton = $.fn.button.noConflict(); // reverts $.fn.button to jqueryui btn
			$.fn.bsButton = bsButton; // assigˇns bootstrap button functionality to $.fn.btn		
			var bsTooltip = $.fn.tooltip.noConflict(); // reverts $.fn.button to jqueryui btn
			$.fn.bsTooltip = bsTooltip; // assigns bootstrap button functionality to $.fn.btn
		</script>
		
		
		<!--------------------------------< Platform >-------------------------------->
		
		<!-- function -->
		<script src="assets/js/functions/esoaf-fakement.js" type="text/javascript"></script>
		<script src="assets/js/functions/esoaf-tool.js" type="text/javascript"></script>
		
		<!-- module -->
		<script src="assets/js/modules/app.js" type="text/javascript"></script>
		
		<!-- component: services -->
		<script src="assets/js/services/validateService.js" type="text/javascript"></script>
		<script src="assets/js/services/imgFileUploadService.js" type="text/javascript"></script>
		<script src="assets/js/services/sysInfoService.js" type="text/javascript"></script>
		<script src="assets/js/services/projInfoService.js" type="text/javascript"></script>
		<script src="assets/js/services/socketService.js" type="text/javascript"></script> 
		<script src="assets/js/services/withLazyModuleService.js" type="text/javascript"></script>
		<script src="assets/js/services/alerts.js" type="text/javascript"></script>
		<script src="assets/js/services/getParameterService.js" type="text/javascript"></script>
		<script src="assets/txn/SOT701/SotService.js" type="text/javascript" ></script>
		<script src="assets/txn/CRM110/crmService.js" type="text/javascript" ></script>

		<!-- component: filters -->
		<script src="assets/js/filters/eDateTime.js" type="text/javascript"></script>
		<script src="assets/js/filters/eMasking.js" type="text/javascript"></script>
		<script src="assets/js/filters/ePersent.js" type="text/javascript"></script>
		<script src="assets/js/filters/repeatCal.js" type="text/javascript"></script>
		<script src="assets/js/filters/smallTitle.js" type="text/javascript"></script>
		<script src="assets/js/filters/mapping.js" type="text/javascript"></script>
		<script src="assets/js/filters/eMakePositive.js" type="text/javascript"></script>
		<script src="assets/js/filters/eChangeBraByte.js" type="text/javascript"></script>

		<!-- component: controllers -->
		<script src="assets/js/controllers/BaseController.js" type="text/javascript"></script>
		<script src="assets/js/controllers/MenuBarController.js" type="text/javascript"></script>
		<script src="assets/js/controllers/InitController.js" type="text/javascript"></script>
		<script src="assets/js/controllers/MarqueeRunController.js" type="text/javascript"></script>
		<script src="assets/js/controllers/RegionController.js" type="text/javascript"></script>
		<script src="assets/js/controllers/BannerController.js" type="text/javascript"></script>
		<script src="assets/js/controllers/CRM452Controller.js" type="text/javascript"></script>

		<!-- component: directives -->
		<script src="assets/js/directives/ngRepeatEndWatch.js" type="text/javascript"></script>
    	<script src="assets/js/directives/elemReady.js" type="text/javascript"></script>
    	<script src="assets/js/directives/autofocus.js" type="text/javascript"></script>
		<script src="assets/js/directives/enterEvent.js" type="text/javascript"></script>
		<script src="assets/js/directives/eCombobox.js" type="text/javascript"></script>
		<script src="assets/js/directives/eUpload.js" type="text/javascript"></script>
		<script src="assets/js/directives/eUploadOnly.js" type="text/javascript"></script>
		<script src="assets/js/directives/ePaging.js" type="text/javascript"></script>
		<script src="assets/js/directives/ePagingOnce.js" type="text/javascript"></script>
		<script src="assets/js/directives/eInputLimit.js" type="text/javascript"></script>
		<script src="assets/js/directives/slimScrollInit.js" type="text/javascript"></script>
		<script src="assets/js/directives/eLengthLimit.js" type="text/javascript"></script>
		<script src="assets/js/directives/functionType.js" type="text/javascript"></script>
		<script src="assets/js/directives/ControllerManager.js" type="text/javascript"></script>
		<script src="assets/js/directives/tablesaw.js" type="text/javascript"></script>
		<script src="assets/js/directives/msgBar.js" type="text/javascript"></script>
		<script src="assets/js/directives/eJumping.js" type="text/javascript"></script>
		<script src="assets/js/directives/eJumpingOnce.js" type="text/javascript"></script>
		<script src="assets/js/directives/eTrustUrl.js" type="text/javascript"></script>
		<script src="assets/js/directives/eDialogBox.js" type="text/javascript"></script>
		<script src="assets/js/directives/eDialogCtrl.js" type="text/javascript"></script>
		<script src="assets/js/directives/ePanelCtrl.js" type="text/javascript"></script>
		<script src="assets/js/directives/custBook.js" type="text/javascript"></script>
		<script src="assets/js/directives/eNumberRange.js" type="text/javascript"></script>
		<script src="assets/js/directives/eSorter.js" type="text/javascript"></script>
		
		<!-- platform init: controllers, services -->
		<script src="assets/js/controllers/DialogAlertController.js" type="text/javascript"></script>
		
		<!-- platform txn -->
		<script src="assets/txn/CMFPG000/CMFPG000.min.js" type="text/javascript"></script>
		<script src="assets/txn/CMFPG000/CMFPG000_AGENT.min.js" type="text/javascript"></script>
		
		<!-- component: javascsript -->
		<script src="assets/lib/highchart/highcharts.js" type="text/javascript"></script>
		<script src="assets/lib/highchart/exporting.js" type="text/javascript"></script>
		
		<!-- CSS-Platform: highest priority -->
	    <link rel="stylesheet" href="assets/css/esoaf-font.css" />	<!-- priority:-1 info:library of font -->
	    <link rel="stylesheet" href="assets/css/esoaf-animate.css" />	<!-- priority:0 info:library of animate -->
	    <link rel="stylesheet" href="assets/css/esoaf-theme.css" /> 	<!-- priority:2 info:style-theme -->
	    <link rel="stylesheet" href="assets/css/esoaf-framework.css" /> <!-- priority:3 info:framework-custom-sttle -->
	    <link rel="stylesheet" href="assets/css/esoaf-platform.css" />  <!-- priority:4 info:platform-framework -->
	    <link rel="stylesheet" href="assets/css/esoaf-component.css" /> <!-- priority:5 info:platform-component -->
		
		<script type="text/javascript">
	   	 	angular.element(document.getElementsByTagName('head')).append(angular.element('<base href="' + window.location.pathname + '" />'));
	  	</script>
	</head>
	<body>
		<div ng-controller="CRM452Controller" ng-cloak>
			<div><msg-bar></msg-bar></div>
			<div class="modal-header">
				<button type="button" class="close" ng-click="closeThisDialog('cancel')" ng-hide="true">&times;</button>
				<h4 id="myModalAlertLabel" class="modal-title" align="center">{{inputVO.type == 'single' ? '單次議價授權覆核' : '期間議價授權覆核'}}</h4>
			</div>
	 		<div class="modal-body">
				<table width="100%" class="rstable">
					<tr>
						<th width="15.5%" class="tdpadding">客戶ID：</th>
						<td width="15.5%" class="tdpadding">{{cust_id}}</td>
						<th width="15.5%" class="tdpadding">貢獻度<br />等級：</th>
						<td width="15.5%" class="tdpadding">{{con_degree | mapping:mappingSet['CRM.CON_DEGREE']:'F3'}}</td>
						<th width="15.5%" class="tdpadding">理財會員<br />等級：</th>
						<td width="15.5%" class="tdpadding" style="white-space: pre">{{vip_degree | mapping:mappingSet['CRM.VIP_DEGREE']:'F3'}}</td>
					</tr>
					<tr>
						<th class="tdpadding">近一年<br />手收：</th>
						<td class="tdpadding">{{y_profee | currency:"$":0}}</td>
						<th class="tdpadding">前日AUM：</th>
						<td class="tdpadding">{{aum_amt | currency:"$":0}}</td>
					</tr>
				</table>
				<div ng-repeat="row in paramList track by $index" ng-show="inputVO.type == 'single'">
					<hr />
					<div class="gv_tab_sc scroll_y">
						<h4 class="h4-title">{{row.APPLY_STATUS == '4' ? '終止單' : '申請單'}}</h4>
						<table class="rtable" width="100%">
							<thead>
								<tr>
									<th width="25%">授權序號</th>
									<th width="25%">商品類型</th>
									<th width="25%">申購幣別</th>
									<th width="25%">申購金額</th>
								</tr>
							</thead>
							<tbody>
								<tr class="repeat-row">
									<td>{{row.APPLY_SEQ}}</td>
									<td>{{row.APPLY_TYPE_NAME}}</td>
									<td>{{row.TRUST_CURR}}</td>
									<td>{{row.PURCHASE_AMT | number : 0}}</td>
								</tr>
							</tbody>
							<thead>
								<tr>
									<th>商品名稱</th>
									<th>申請折數</th>
									<th>適用費率</th>
									<th>折扣後費率</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>{{row.PROD_NAME}}</td>
									<td>{{row.FEE_DISCOUNT}}&nbsp;折</td>
									<td>{{row.DEFAULT_FEE_RATE}}&nbsp;%</td>
									<td>{{row.FEE_DISCOUNT * 0.1 * row.DEFAULT_FEE_RATE|number:2}}&nbsp;%</td>									
								</tr>
							</tbody>
							<thead>
								<tr>
									<th>議價原因</th>
									<td colspan="3">{{row.BRG_REASON}}</td>
								</tr>
								<tr>
									<th>最高授權層級</th>
									<td colspan="3">{{row.HIGHEST_AUTH_LV_NAME}}</td>
								</tr>
							</thead>
						</table>
						<br>
						<div>
							<label>簽核意見</label>&nbsp;&nbsp;
							<button type="button" class="btn btn-primary" ng-click="action('accept', row)">同意</button>&nbsp;&nbsp;
							<button type="button" class="btn btn-warning" ng-click="action('reject', row)">退回</button>
							<br /><br />
						</div>
					</div>
					<div>
						<textarea placeholder="請輸入...(文字內容僅限100字內)" ng-model="row.comments" maxlength="100" style="width: 100%; height: 100px"></textarea>
					</div>
				</div>
				<div ng-repeat="row in paramList track by $index" ng-show="inputVO.type == 'period'">
					<hr />
					<div class="gv_tab_sc scroll_y">
						<h4 class="h4-title">{{row.APPLY_TYPE == '1' ? '基金' : '海外ETF/股票'}}&nbsp;{{row.APPLY_STATUS == '4' ? '終止單' : '申請單'}}</h4>
						<table ng-show="row.APPLY_TYPE == '1'" width="100%">
							<thead>
								<tr>
									<th width="25%">國內股票型</th>
									<td width="25%">{{row.DMT_STOCK}}&nbsp;折</td>
									<th width="25%">國外股票型</th>
									<td width="25%">{{row.FRN_STOCK}}&nbsp;折</td>
								</tr>
								<tr>
									<th>國內債券型</th>
									<td>{{row.DMT_BOND}}&nbsp;折</td>
									<th>國外債券型</th>
									<td>{{row.FRN_BOND}}&nbsp;折</td>
								</tr>
								<tr>
									<th>國內平衡型</th>
									<td>{{row.DMT_BALANCED}}&nbsp;折</td>
									<th>國外平衡型</th>
									<td>{{row.FRN_BALANCED}}&nbsp;折</td>
								</tr>
								<tr>
									<th>適用優惠期間</th>
									<td colspan="3">{{toJsDate(row.BRG_BEGIN_DATE)|date:"yyyy-MM-dd"}}&nbsp;~&nbsp;{{toJsDate(row.BRG_END_DATE)|date:"yyyy-MM-dd"}}</td>
								</tr>
								<tr>
									<th>{{row.APPLY_STATUS == '1' ? '議價原因' : '終止原因'}}</th>
									<td colspan="3" ng-show="row.APPLY_STATUS == '1'">{{row.BRG_REASON}}</td>
									<td colspan="3" ng-show="row.APPLY_STATUS == '4'">{{row.TERMINATE_REASON}}</td>
								</tr>
								<tr>
									<th>最高授權層級</th>
									<td colspan="3">{{row.HIGHEST_AUTH_LV_NAME}}</td>
								</tr>
							</thead>
						</table>
						<table ng-show="row.APPLY_TYPE == '2'" width="100%">
							<thead>
								<tr>
									<th width="25%">買入香港交易所</th>
									<td width="25%">{{row.BUY_HK_MRK}}&nbsp;折</td>
									<th width="25%">賣出香港交易所</th>
									<td width="25%">{{row.SELL_HK_MRK}}&nbsp;折</td>
								</tr>
								<tr>
									<th>買入美國交易所</th>
									<td>{{row.BUY_US_MRK}}&nbsp;折</td>
									<th>賣出美國交易所</th>
									<td>{{row.SELL_US_MRK}}&nbsp;折</td>
								</tr>
								<tr>
									<th>買入英國交易所</th>
									<td>{{row.BUY_UK_MRK}}&nbsp;折</td>
									<th>賣出英國交易所</th>
									<td>{{row.SELL_UK_MRK}}&nbsp;折</td>
								</tr>
								<tr>
									<th>買入日本交易所</th>
									<td>{{row.BUY_JP_MRK}}&nbsp;折</td>
									<th>賣出日本交易所</th>
									<td>{{row.SELL_JP_MRK}}&nbsp;折</td>
								</tr>
								<tr>
									<th>適用優惠期間</th>
									<td colspan="3">{{toJsDate(row.BRG_BEGIN_DATE)|date:"yyyy-MM-dd"}}&nbsp;~&nbsp;{{toJsDate(row.BRG_END_DATE)|date:"yyyy-MM-dd"}}</td>
								</tr>
								<tr>
									<th>{{row.APPLY_STATUS == '1' ? '議價原因' : '終止原因'}}</th>
									<td colspan="3" ng-show="row.APPLY_STATUS == '1'">{{row.BRG_REASON}}</td>
									<td colspan="3" ng-show="row.APPLY_STATUS == '4'">{{row.TERMINATE_REASON}}</td>
								</tr>
								<tr>
									<th>最高授權層級</th>
									<td colspan="3">{{row.HIGHEST_AUTH_LV_NAME}}</td>
								</tr>
							</thead>
						</table>
						<br>
						<div>
							<label>簽核意見</label>&nbsp;&nbsp;
							<button type="button" class="btn btn-primary" ng-click="action('accept', row)">同意</button>&nbsp;&nbsp;
							<button type="button" class="btn btn-warning" ng-click="action('reject', row)">退回</button>
							<br /><br />
						</div>
					</div>
					<div>
						<textarea placeholder="請輸入...(文字內容僅限100字內)" ng-model="row.comments" maxlength="100" style="width: 100%; height: 50px"></textarea>
					</div>
				</div>
				<br />
				<div style="text-align: center;" ng-show = "cust_id == '' || cust_id == undefined">
					<span style="color: red;">議價申請已覆核完成</span>
				</div>
				<div class="search_box_btn text-center" ng-hide="cust_id == '' || cust_id == undefined">
					<button type="button" class="btn btn-primary" ng-click="action('allAccept', undefined)" ng-disabled = "cust_id == '' || cust_id == undefined">全部同意</button>&nbsp;&nbsp;
					<button type="button" class="btn btn-warning" ng-click="action('allReject', undefined)" ng-disabled = "cust_id == '' || cust_id == undefined">全部退回</button>
				</div>
			</div>
		</div>
	</body>
</html>